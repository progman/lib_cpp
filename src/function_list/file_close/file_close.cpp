//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
// file close
int libcore::file_close(int handle, bool flag_sync)
{
	int rc;


// fsync file
	if (flag_sync != false)
	{
		rc = ::fsync(handle);
		if (rc == -1)
		{
			rc = errno;
			::close(handle);
			errno = rc;
			return -1;
		}
	}


// close file
	rc = ::close(handle);
	if (rc == -1)
	{
		return -1;
	}


	return 0;
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
