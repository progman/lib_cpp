#!/bin/bash
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
function do_it()
{
# create temp dir and files
	local LOCAL_TMPDIR="/tmp";
	if [ "${TMPDIR}" != "" ] && [ -d "${TMPDIR}" ];
	then
		LOCAL_TMPDIR="${TMPDIR}";
	fi


	local TMP1;
	TMP1="$(mktemp --tmpdir="${LOCAL_TMPDIR}" 2> /dev/null)";
	if [ "${?}" != "0" ];
	then
		echo "can't make tmp file";
		return 1;
	fi



	echo -n > "${TMP1}";
	find ./src/ -type f | grep '\.hpp$' | grep -v 'head.hpp' | grep -v 'tail.hpp' | sort >> "${TMP1}";

	echo -n > libcore.hpp;
	cat src/head.hpp >> libcore.hpp;

	while read -r LINE;
	do

		echo >> libcore.hpp;
		echo >> libcore.hpp;
		cat "${LINE}" >> libcore.hpp;

	done < "${TMP1}";

	cat src/tail.hpp >> libcore.hpp;



	echo -n > "${TMP1}";
	find ./src/ -type f | grep '\.cpp$' | grep -v 'head.cpp' | sort >> "${TMP1}";


	echo -n > libcore.cpp;
	cat src/head.cpp >> libcore.cpp;

	while read -r LINE;
	do

		cat "${LINE}" >> libcore.cpp;

	done < "${TMP1}";



	rm -rf -- "${TMP1}" &> /dev/null;


	return 0;
}
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
do_it;
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
